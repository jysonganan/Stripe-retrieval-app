'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var RemoteComponent = require('./RemoteComponent.js');
var RemoteText = require('./RemoteText.js');

function createController(components, {
  renderComponent: externalRenderComponent,
  renderText: externalRenderText
} = {}) {
  const registry = new Map(Object.entries(components));
  const renderComponent = externalRenderComponent ? componentProps => externalRenderComponent(componentProps, {
    renderDefault() {
      return RemoteComponent.renderComponent(componentProps);
    }

  }) : RemoteComponent.renderComponent;
  const renderText = externalRenderText ? textProps => externalRenderText(textProps, {
    renderDefault() {
      return RemoteText.renderText(textProps);
    }

  }) : RemoteText.renderText;
  return {
    get(type) {
      const value = registry.get(type);

      if (value == null) {
        throw new Error(`Unknown component: ${type}`);
      }

      return value;
    },

    renderer: {
      renderComponent,
      renderText
    }
  };
}

exports.createController = createController;
