"use strict";var __StripeExtExports=(()=>{var oe=Object.create;var S=Object.defineProperty,ae=Object.defineProperties,ie=Object.getOwnPropertyDescriptor,ce=Object.getOwnPropertyDescriptors,ue=Object.getOwnPropertyNames,j=Object.getOwnPropertySymbols,le=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var G=(n,r,o)=>r in n?S(n,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[r]=o,U=(n,r)=>{for(var o in r||(r={}))F.call(r,o)&&G(n,o,r[o]);if(j)for(var o of j(r))V.call(r,o)&&G(n,o,r[o]);return n},H=(n,r)=>ae(n,ce(r));var P=(n=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(n,{get:(r,o)=>(typeof require!="undefined"?require:r)[o]}):n)(function(n){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+n+'" is not supported')});var z=(n,r)=>{var o={};for(var i in n)F.call(n,i)&&r.indexOf(i)<0&&(o[i]=n[i]);if(n!=null&&j)for(var i of j(n))r.indexOf(i)<0&&V.call(n,i)&&(o[i]=n[i]);return o};var h=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports),se=(n,r)=>{for(var o in r)S(n,o,{get:r[o],enumerable:!0})},v=(n,r,o,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of ue(r))!F.call(n,s)&&s!==o&&S(n,s,{get:()=>r[s],enumerable:!(i=ie(r,s))||i.enumerable});return n},O=(n,r,o)=>(v(n,r,"default"),o&&v(o,r,"default")),A=(n,r,o)=>(o=n!=null?oe(le(n)):{},v(r||!n||!n.__esModule?S(o,"default",{value:n,enumerable:!0}):o,n)),pe=n=>v(S({},"__esModule",{value:!0}),n);var N=(n,r,o)=>new Promise((i,s)=>{var l=m=>{try{T(o.next(m))}catch(y){s(y)}},b=m=>{try{T(o.throw(m))}catch(y){s(y)}},T=m=>m.done?i(m.value):Promise.resolve(m.value).then(l,b);T((o=o.apply(n,r)).next())});var q=h(t=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TailorDateField=t.List=t.ListItem=t.Tooltip=t.TextField=t.TextArea=t.TabPanels=t.TabList=t.Tabs=t.TabPanel=t.Tab=t.TableHeaderCell=t.TableCell=t.TableFooter=t.TableRow=t.TableBody=t.TableHead=t.Table=t.Switch=t.Spinner=t.Select=t.Radio=t.Notice=t.Menu=t.MenuGroup=t.MenuItem=t.Link=t.Icon=t.FormFieldGroup=t.Divider=t.ChipList=t.Chip=t.Checkbox=t.ButtonGroup=t.Button=t.Banner=t.Badge=t.AccordionItem=t.Accordion=void 0;var a=P("@remote-ui/react");t.Accordion=(0,a.createRemoteReactComponent)("Accordion");t.AccordionItem=(0,a.createRemoteReactComponent)("AccordionItem",{fragmentProps:["title","subtitle","media","actions"]});t.Badge=(0,a.createRemoteReactComponent)("Badge");t.Banner=(0,a.createRemoteReactComponent)("Banner",{fragmentProps:["description","title","actions"]});t.Button=(0,a.createRemoteReactComponent)("Button");t.ButtonGroup=(0,a.createRemoteReactComponent)("ButtonGroup",{fragmentProps:["menuTrigger"]});t.Checkbox=(0,a.createRemoteReactComponent)("Checkbox",{fragmentProps:["label"]});t.Chip=(0,a.createRemoteReactComponent)("Chip");t.ChipList=(0,a.createRemoteReactComponent)("ChipList");t.Divider=(0,a.createRemoteReactComponent)("Divider");t.FormFieldGroup=(0,a.createRemoteReactComponent)("FormFieldGroup");t.Icon=(0,a.createRemoteReactComponent)("Icon");t.Link=(0,a.createRemoteReactComponent)("Link");t.MenuItem=(0,a.createRemoteReactComponent)("MenuItem");t.MenuGroup=(0,a.createRemoteReactComponent)("MenuGroup",{fragmentProps:["title"]});t.Menu=(0,a.createRemoteReactComponent)("Menu",{fragmentProps:["trigger"]});t.Notice=(0,a.createRemoteReactComponent)("Notice",{fragmentProps:["description","title","actions"]});t.Radio=(0,a.createRemoteReactComponent)("Radio",{fragmentProps:["label"]});t.Select=(0,a.createRemoteReactComponent)("Select",{fragmentProps:["label"]});t.Spinner=(0,a.createRemoteReactComponent)("Spinner");t.Switch=(0,a.createRemoteReactComponent)("Switch",{fragmentProps:["label"]});t.Table=(0,a.createRemoteReactComponent)("Table");t.TableHead=(0,a.createRemoteReactComponent)("TableHead");t.TableBody=(0,a.createRemoteReactComponent)("TableBody");t.TableRow=(0,a.createRemoteReactComponent)("TableRow");t.TableFooter=(0,a.createRemoteReactComponent)("TableFooter");t.TableCell=(0,a.createRemoteReactComponent)("TableCell");t.TableHeaderCell=(0,a.createRemoteReactComponent)("TableHeaderCell");t.Tab=(0,a.createRemoteReactComponent)("Tab");t.TabPanel=(0,a.createRemoteReactComponent)("TabPanel");t.Tabs=(0,a.createRemoteReactComponent)("Tabs");t.TabList=(0,a.createRemoteReactComponent)("TabList");t.TabPanels=(0,a.createRemoteReactComponent)("TabPanels");t.TextArea=(0,a.createRemoteReactComponent)("TextArea",{fragmentProps:["label"]});t.TextField=(0,a.createRemoteReactComponent)("TextField",{fragmentProps:["label"]});t.Tooltip=(0,a.createRemoteReactComponent)("Tooltip",{fragmentProps:["trigger"]});t.ListItem=(0,a.createRemoteReactComponent)("ListItem",{fragmentProps:["value","title","secondaryTitle","icon","image"]});t.List=(0,a.createRemoteReactComponent)("List");t.TailorDateField=(0,a.createRemoteReactComponent)("TailorDateField",{fragmentProps:["label"]})});var K=h(d=>{"use strict";Object.defineProperty(d,"__esModule",{value:!0});d.SettingsView=d.Img=d.FocusView=d.ContextView=d.LineChart=d.BarChart=void 0;var w=P("@remote-ui/react");d.BarChart=(0,w.createRemoteReactComponent)("BarChart");d.LineChart=(0,w.createRemoteReactComponent)("LineChart");d.ContextView=(0,w.createRemoteReactComponent)("ContextView",{fragmentProps:["actions","banner","primaryAction","secondaryAction","footerContent"]});d.FocusView=(0,w.createRemoteReactComponent)("FocusView",{fragmentProps:["primaryAction","secondaryAction","footerContent"]});d.Img=(0,w.createRemoteReactComponent)("Img");d.SettingsView=(0,w.createRemoteReactComponent)("SettingsView")});var $=h(u=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});u.DateField=u.Icon=u.Button=u.Link=u.Checkbox=u.Switch=u.Radio=u.Select=u.TextArea=u.TextField=u.Inline=u.Box=void 0;var f=P("@remote-ui/react");u.Box=(0,f.createRemoteReactComponent)("Box");u.Inline=(0,f.createRemoteReactComponent)("Inline");u.TextField=(0,f.createRemoteReactComponent)("TextField",{fragmentProps:["label"]});u.TextArea=(0,f.createRemoteReactComponent)("TextArea",{fragmentProps:["label"]});u.Select=(0,f.createRemoteReactComponent)("Select",{fragmentProps:["label"]});u.Radio=(0,f.createRemoteReactComponent)("Radio",{fragmentProps:["label"]});u.Switch=(0,f.createRemoteReactComponent)("Switch",{fragmentProps:["label"]});u.Checkbox=(0,f.createRemoteReactComponent)("Checkbox",{fragmentProps:["label"]});u.Link=(0,f.createRemoteReactComponent)("Link");u.Button=(0,f.createRemoteReactComponent)("Button");u.Icon=(0,f.createRemoteReactComponent)("Icon");u.DateField=(0,f.createRemoteReactComponent)("DateField",{fragmentProps:["label"]})});var W=h(e=>{"use strict";var me=e&&e.__createBinding||(Object.create?function(n,r,o,i){i===void 0&&(i=o);var s=Object.getOwnPropertyDescriptor(r,o);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[o]}}),Object.defineProperty(n,i,s)}:function(n,r,o,i){i===void 0&&(i=o),n[i]=r[o]}),de=e&&e.__exportStar||function(n,r){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(r,o)&&me(r,n,o)};Object.defineProperty(e,"__esModule",{value:!0});e.TextField=e.TextArea=e.Switch=e.Select=e.Radio=e.Link=e.Inline=e.Icon=e.DateField=e.Checkbox=e.Button=e.Box=e.Tooltip=e.Tabs=e.TableRow=e.TableHeaderCell=e.TableHead=e.TableFooter=e.TableCell=e.TableBody=e.Table=e.TabPanels=e.TabPanel=e.TabList=e.Tab=e.Spinner=e.MenuItem=e.MenuGroup=e.Menu=e.ListItem=e.List=e.FormFieldGroup=e.Divider=e.ChipList=e.Chip=e.ButtonGroup=e.Banner=e.Badge=e.AccordionItem=e.Accordion=void 0;var c=q();Object.defineProperty(e,"Accordion",{enumerable:!0,get:function(){return c.Accordion}});Object.defineProperty(e,"AccordionItem",{enumerable:!0,get:function(){return c.AccordionItem}});Object.defineProperty(e,"Badge",{enumerable:!0,get:function(){return c.Badge}});Object.defineProperty(e,"Banner",{enumerable:!0,get:function(){return c.Banner}});Object.defineProperty(e,"ButtonGroup",{enumerable:!0,get:function(){return c.ButtonGroup}});Object.defineProperty(e,"Chip",{enumerable:!0,get:function(){return c.Chip}});Object.defineProperty(e,"ChipList",{enumerable:!0,get:function(){return c.ChipList}});Object.defineProperty(e,"Divider",{enumerable:!0,get:function(){return c.Divider}});Object.defineProperty(e,"FormFieldGroup",{enumerable:!0,get:function(){return c.FormFieldGroup}});Object.defineProperty(e,"List",{enumerable:!0,get:function(){return c.List}});Object.defineProperty(e,"ListItem",{enumerable:!0,get:function(){return c.ListItem}});Object.defineProperty(e,"Menu",{enumerable:!0,get:function(){return c.Menu}});Object.defineProperty(e,"MenuGroup",{enumerable:!0,get:function(){return c.MenuGroup}});Object.defineProperty(e,"MenuItem",{enumerable:!0,get:function(){return c.MenuItem}});Object.defineProperty(e,"Spinner",{enumerable:!0,get:function(){return c.Spinner}});Object.defineProperty(e,"Tab",{enumerable:!0,get:function(){return c.Tab}});Object.defineProperty(e,"TabList",{enumerable:!0,get:function(){return c.TabList}});Object.defineProperty(e,"TabPanel",{enumerable:!0,get:function(){return c.TabPanel}});Object.defineProperty(e,"TabPanels",{enumerable:!0,get:function(){return c.TabPanels}});Object.defineProperty(e,"Table",{enumerable:!0,get:function(){return c.Table}});Object.defineProperty(e,"TableBody",{enumerable:!0,get:function(){return c.TableBody}});Object.defineProperty(e,"TableCell",{enumerable:!0,get:function(){return c.TableCell}});Object.defineProperty(e,"TableFooter",{enumerable:!0,get:function(){return c.TableFooter}});Object.defineProperty(e,"TableHead",{enumerable:!0,get:function(){return c.TableHead}});Object.defineProperty(e,"TableHeaderCell",{enumerable:!0,get:function(){return c.TableHeaderCell}});Object.defineProperty(e,"TableRow",{enumerable:!0,get:function(){return c.TableRow}});Object.defineProperty(e,"Tabs",{enumerable:!0,get:function(){return c.Tabs}});Object.defineProperty(e,"Tooltip",{enumerable:!0,get:function(){return c.Tooltip}});de(K(),e);var g=$();Object.defineProperty(e,"Box",{enumerable:!0,get:function(){return g.Box}});Object.defineProperty(e,"Button",{enumerable:!0,get:function(){return g.Button}});Object.defineProperty(e,"Checkbox",{enumerable:!0,get:function(){return g.Checkbox}});Object.defineProperty(e,"DateField",{enumerable:!0,get:function(){return g.DateField}});Object.defineProperty(e,"Icon",{enumerable:!0,get:function(){return g.Icon}});Object.defineProperty(e,"Inline",{enumerable:!0,get:function(){return g.Inline}});Object.defineProperty(e,"Link",{enumerable:!0,get:function(){return g.Link}});Object.defineProperty(e,"Radio",{enumerable:!0,get:function(){return g.Radio}});Object.defineProperty(e,"Select",{enumerable:!0,get:function(){return g.Select}});Object.defineProperty(e,"Switch",{enumerable:!0,get:function(){return g.Switch}});Object.defineProperty(e,"TextArea",{enumerable:!0,get:function(){return g.TextArea}});Object.defineProperty(e,"TextField",{enumerable:!0,get:function(){return g.TextField}})});var J=h((Me,Y)=>{"use strict";var be=function(n,r,o,i,s,l,b,T){if(!n){var m;if(r===void 0)m=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var y=[o,i,s,l,b,T],re=0;m=new Error(r.replace(/%s/g,function(){return y[re++]})),m.name="Invariant Violation"}throw m.framesToPop=1,m}};Y.exports=be});var Q=h(I=>{"use strict";var fe=I&&I.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(I,"__esModule",{value:!0});I.getHostEndpoint=void 0;var ge=fe(J()),Re=()=>{let n=globalThis.__StripeExtExports.endpoint;return(0,ge.default)(n,"hostEndpoint has not been initialized"),n};I.getHostEndpoint=Re});var X=h(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.fetchStripeSignature=void 0;var he=Q(),ye=n=>(0,he.getHostEndpoint)().call.fetchStripeSignature(n);L.fetchStripeSignature=ye});var Z=h(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});var Te=X();M.default=Te.fetchStripeSignature});var ne=h(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.UI_VERSION=x.SDK_VERSION=void 0;x.SDK_VERSION="8.0.0";x.UI_VERSION="31.4.1"});var C={};se(C,{App:()=>te,BUILD_TIME:()=>Se,default:()=>Be});var R=A(W()),ee=A(Z()),_=P("react");var p=P("react/jsx-runtime"),Ce="https://localhost:8080/auth/login",Pe="https://localhost:8080/auth/logout",Oe="https://localhost:8080/auth/verify",we="https://localhost:8080/auth/userinfo",Ie="https://localhost:8080/auth/session",E=()=>({name:"initializing",context:{stateKey:window.crypto.randomUUID()}}),_e=(n,r)=>{let o=()=>(console.error("Invalid action",r.type,"for state",n.name),n);switch(n.name){case"initializing":switch(r.type){case"initialized":return r.payload.user?{name:"logged-in",context:{user:r.payload.user}}:{name:"logged-out",context:n.context};default:return o()}case"logged-out":switch(r.type){case"log-in":return{name:"waiting-for-auth",context:n.context};default:return o()}case"waiting-for-auth":switch(r.type){case"authorized":return E();case"log-out":return{name:"logging-out"};default:return o()}case"logging-out":switch(r.type){case"session-deleted":return E();default:return o()}case"logged-in":switch(r.type){case"log-out":return{name:"logging-out"};default:return o()}default:return o()}},xe=({userContext:n})=>{let[r,o]=(0,_.useReducer)(_e,null,E),i=(0,_.useCallback)((re,...qe)=>N(void 0,[re,...qe],function*(l,m={}){var y=m,{headers:b}=y,T=z(y,["headers"]);var D,k;let B=new Headers(b);return B.append("stripe-user-id",(D=n==null?void 0:n.id)!=null?D:""),B.append("stripe-account-id",(k=n==null?void 0:n.account.id)!=null?k:""),B.append("stripe-signature",yield(0,ee.default)()),yield fetch(l,H(U({},T),{headers:B}))}),[]);return(0,_.useEffect)(()=>{switch(r.name){case"initializing":{let l=new AbortController;return i(we,{signal:l.signal}).then(b=>b.json()).then(b=>o({type:"initialized",payload:{user:b}})).catch(()=>{l.signal.aborted||o({type:"initialized",payload:{user:null}})}),()=>{l.abort()}}case"waiting-for-auth":{let l=setInterval(()=>{i(`${Oe}?state=${r.context.stateKey}`).then(b=>b.status>=200&&b.status<300&&o({type:"authorized"}))},5e3);return()=>clearInterval(l)}case"logging-out":{let l=new AbortController;return i(Ie,{signal:l.signal,method:"DELETE"}).finally(()=>{o({type:"session-deleted"})}),()=>{l.abort()}}}},[r,o]),(0,p.jsx)(R.ContextView,{title:"Get started with Stripe Apps",children:(0,p.jsx)(R.Box,{children:(l=>{switch(l.name){case"initializing":return"Loading...";case"logged-out":return(0,p.jsx)(R.Button,{type:"primary",href:`${Ce}?${new URLSearchParams({state:l.context.stateKey})}`,target:"_blank",onPress:()=>o({type:"log-in"}),children:"Log In"});case"waiting-for-auth":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(R.Box,{children:"Please complete authorization in popup."}),(0,p.jsx)(R.Button,{type:"destructive",onPress:()=>o({type:"log-out"}),children:"Cancel"})]});case"logged-in":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(R.Box,{children:["You are logged in as ",l.context.user.name," (",l.context.user.email,")"]}),(0,p.jsx)(R.Button,{type:"destructive",href:`${Pe}?${new URLSearchParams({account:n.account.id,user:n.id})}`,target:"_blank",onPress:()=>o({type:"log-out"}),children:"Log Out"})]});case"logging-out":return(0,p.jsx)(R.Button,{type:"destructive",disabled:!0,children:"Log Out"})}})(r)})})},te=xe;O(C,A(ne()));var Se="2023-02-15 18:08:01.041193322 +0530 IST m=+8.190336298";var Be={id:"com.example.basic-oauth2-test",version:"0.0.2",name:"Basic-OAuth2 Test",icon:"",permissions:[],app_backend:{webhooks:null},ui_extension:{views:[{viewport:"stripe.dashboard.home.overview",component:"App"}],actions:[],content_security_policy:{"connect-src":null,"image-src":null,purpose:""}},post_install_action:null,constants:null};return pe(C);})();
//# sourceMappingURL=ext.min.js.map
